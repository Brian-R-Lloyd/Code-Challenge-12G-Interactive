<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link href="styles/animate4.css" rel="stylesheet" type="text/css">
<title>Untitled Document</title>
</head>

<body>
<div id="animation">
<div id="details">
<h1>Brian Lloyd</h1>
<h3>Code Challenge</h3>
<p>As requested this website contains three animations the ball, the shadow and this text box.</p>
<p>The ball is animated using css3 keyframes to describe it's path and to create the squash and stretch transforms</p>
<p>The shadow animation is generated using JavaScript/jQuery. The position is calculated based on the x co-ordinate of the ball and the size and opacity of the shadow is calculated based on the y co-ordinate of the ball.</p>   
</div>
<div id="long_shadow"></div>
    <div id="shadow"></div>
    <div id="ball" class="speed_medium"></div>
</div>
<div id="controls">
    <button class="play"onclick="JavaScript:play();">Play / Pause</button><br />
    <button class="slow" onclick="JavaScript:slow();">Slow</button>
    <button class="medium" onclick="JavaScript:medium();">Medium</button>
    <button class="fast" onclick="JavaScript:fast();">Fast</button>
<div id="cords"></div>
</div>
<script>

setInterval(function(){
	var elem = document.getElementById('ball');
	var x = elem.offsetLeft +68;
	var y = elem.offsetTop +137;
	/*alert('x:'+x);*/
	var h = -(y-600);
	var sp = x-(h/2)-90
	$('#shadow').css("left",sp + "px");
	//document.getElementById('shadow').style.left = sp + "px"; 
	document.getElementById('shadow').style.width = (h/2)+180 + "px";
	document.getElementById('shadow').style.height = (h/20)+64 + "px";
	document.getElementById('shadow').style.opacity = ((1/h)*10)+.5;
  	//document.getElementById('shadow').style.top = y + "px";
	var txt=document.getElementById("cords")
  	txt.innerHTML="X:"+x+" Y:"+y+"height :"+1/h;},40);

setTimeout("hide_text()",15000);
function hide_text(){
$('#details,#long_shadow').animate({opacity: '.0' },{ duration:5000})};
	
	function play(){
		if($('#ball').hasClass('paused')){
			$(document.getElementById('ball')).removeClass('paused');
			}
			else
			{
			$(document.getElementById('ball')).addClass('paused');
			}
	};
	
	
	function slow(){
		if($('#ball').hasClass('speed_medium')){
			$('#ball').removeClass('speed_medium').delay(10).queue(function(next){
						$('#ball').addClass('speed_slow');
						next();
		        });
		};
		if($('#ball').hasClass('speed_fast')){
			$('#ball').removeClass('speed_fast').delay(10).queue(function(next){
						$('#ball').addClass('speed_slow');
						next();
		        });
		};
	};
	
	function fast(){
		if($('#ball').hasClass('speed_medium')){
			$('#ball').removeClass('speed_medium').delay(10).queue(function(next){
						$('#ball').addClass('speed_fast');
						next();
		        });
		};
		if($('#ball').hasClass('speed_slow')){
			$('#ball').removeClass('speed_slow').delay(10).queue(function(next){
						$('#ball').addClass('speed_fast');
						next();
		        });
		};
	};
	
	function medium(){
		if($('#ball').hasClass('speed_slow')){
			$('#ball').removeClass('speed_slow').delay(10).queue(function(next){
						$('#ball').addClass('speed_medium');
						next();
		        });
		};
		if($('#ball').hasClass('speed_fast')){
			$('#ball').removeClass('speed_fast').delay(10).queue(function(next){
						$('#ball').addClass('speed_medium');
						next();
		        });
		};
	};
	
	$('a.slow').click(function(){
		ball.style.animationDuration='10s';
		ball.style['-webkit-animationDuration']='10s';
	});
	$('a.medium').click(function(){
		ball.style.animationDuration='5s';
		ball.style['-webkit-animationDuration']='5s';
	})
	$('a.fast').click(function(){
		ball.style.animationDuration='2s';
		ball.style['-webkit-animationDuration']='2s';
	});
</script>
</body>
</html>
